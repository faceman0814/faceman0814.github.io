{"title":"NFS for CentOS","uid":"584404787b0b0e754117ced08ab7daf6","slug":"NFSforCentOS","date":"2024-11-19T00:00:00.000Z","updated":"2024-12-24T01:56:35.264Z","comments":true,"path":"api/articles/NFSforCentOS.json","keywords":null,"cover":"https://github.com/faceman0814/picx-images-hosting/raw/master/20241114/docker.4g4ilvor9o.webp","content":"<h1 id=\"NFS-for-CentOS\"><a href=\"#NFS-for-CentOS\" class=\"headerlink\" title=\"NFS for CentOS\"></a>NFS for CentOS</h1><h1 id=\"NFS介绍\"><a href=\"#NFS介绍\" class=\"headerlink\" title=\"NFS介绍\"></a>NFS介绍</h1><p>NFS介绍NFS 即网络文件系统（Network File-System），可以通过网络让不同机器、不同系统之间可以实现文件共享。通过 NFS，可以访问远程共享目录，就像访问本地磁盘一样。NFS 只是一种文件系统，本身并没有传输功能，是基于 RPC（远程过程调用）协议实现的，采用 C&#x2F;S 架构。</p>\n<h1 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h1><p>目标：实现A共享目录，B访问A。</p>\n<p>前置条件：准备两台主机A和B，且在同一局域网。</p>\n<ol>\n<li><p>A安装NFS软件包</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo yum install nfs-utils</span><br></pre></td></tr></table></figure></li>\n<li><p>配置 NFS 服务端</p>\n<p>编辑 <code>/etc/exports</code> 文件，添加需要共享的目录及其权限设置。</p>\n<p>例如，假设我们需要共享 <code>/mnt/data</code> 目录，并且允许所有客户端读写访问：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/mnt/data  *(rw,sync,no_root_squashva</span><br></pre></td></tr></table></figure>\n\n<p>其中：</p>\n<ul>\n<li><code>/mnt/data</code> 是需要共享的目录。</li>\n<li>&#96;&#96; 表示允许所有客户端访问。</li>\n<li><code>rw</code> 表示允许读写访问。</li>\n<li><code>sync</code> 表示同步写入磁盘，保证数据的安全性。</li>\n<li><code>no_root_squash</code> 表示允许 root 用户访问共享目录。</li>\n</ul>\n<p>保存修改后，使用以下命令重新加载配置：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo exportfs -r</span><br></pre></td></tr></table></figure></li>\n<li><p>启动 NFS 服务端</p>\n<p>使用以下命令启动 NFS 服务端：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo systemctl start nfs-server</span><br></pre></td></tr></table></figure>\n\n<p>可以使用以下命令检查服务是否已启动：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo systemctl status nfs-server</span><br></pre></td></tr></table></figure></li>\n<li><p>B配置 NFS 客户端</p>\n<p>在B上，安装 NFS 软件包：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo yum install nfs-utils</span><br></pre></td></tr></table></figure>\n\n<p>然后运行之后，使用以下命令挂载共享目录：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo mount server:/mnt/data /mnt/nfs</span><br></pre></td></tr></table></figure>\n\n<p>其中：</p>\n<ul>\n<li><code>server</code> 是 NFS 服务端的 IP 地址或主机名。</li>\n<li><code>/mnt/data</code> 是共享的目录。</li>\n<li><code>/mnt/nfs</code> 是挂载到客户端上的目录。</li>\n</ul>\n</li>\n<li><p>5.验证 NFS 服务</p>\n<p>可以在客户端上创建、修改、删除文件，然后在服务端上查看是否同步更新。</p>\n<p>如果需要卸载 NFS 共享目录，可以使用以下命令：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo umount /mnt/nfs</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h1 id=\"问题解决\"><a href=\"#问题解决\" class=\"headerlink\" title=\"问题解决\"></a>问题解决</h1><h1 id=\"mount-nfs-No-route-to-host\"><a href=\"#mount-nfs-No-route-to-host\" class=\"headerlink\" title=\"mount.nfs: No route to host\"></a>mount.nfs: No route to host</h1><p>这个错误通常表示无法到达目标主机。请确保在执行该命令之前，您的机器可以访问目标机器的 IP 地址，并且目标机器上的 NFS 服务正在运行。</p>\n<p>您可以通过以下几种方法来解决这个问题：</p>\n<ol>\n<li><p>检查网络连接</p>\n<p>请检查您的机器与目标机器之间的网络连接，确保它们可以互相访问。您可以尝试使用 <code>ping</code> 命令来测试网络连接，例如：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ping <span class=\"number\">192.168</span><span class=\"number\">.2</span><span class=\"number\">.164</span></span><br></pre></td></tr></table></figure>\n<p>如果无法 ping 通目标机器，可能需要检查您的网络设置或防火墙配置。</p>\n</li>\n<li><p>检查目标机器的 NFS 服务状态</p>\n<p>请确保目标机器上的 NFS 服务正在运行，并且已正确配置共享目录。您可以尝试在目标机器上使用以下命令检查 NFS 服务状态</p>\n</li>\n<li><p>检查目标机器的防火墙设置</p>\n<p>如果目标机器的防火墙已启用，请确保已将 NFS 服务端口添加到防火墙规则中。NFS 默认使用 TCP 和 UDP 端口 2049。您可以尝试使用以下命令检查目标机器上的防火墙设置：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --<span class=\"built_in\">list</span>-all</span><br></pre></td></tr></table></figure>\n<p>如果需要，请添加防火墙规则，例如：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --add-service=nfs --permanent</span><br><span class=\"line\">firewall-cmd --reload</span><br></pre></td></tr></table></figure></li>\n</ol>\n","text":"NFS for CentOSNFS介绍NFS介绍NFS 即网络文件系统（Network File-System），可以通过网络让不同机器、不同系统之间可以实现文...","permalink":"/post/NFSforCentOS","photos":[],"count_time":{"symbolsCount":"1.5k","symbolsTime":"1 mins."},"categories":[{"name":"DevOps","slug":"DevOps","count":11,"path":"api/categories/DevOps.json"}],"tags":[{"name":"CentOS","slug":"CentOS","count":1,"path":"api/tags/CentOS.json"},{"name":"Linux","slug":"Linux","count":3,"path":"api/tags/Linux.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#NFS-for-CentOS\"><span class=\"toc-text\">NFS for CentOS</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#NFS%E4%BB%8B%E7%BB%8D\"><span class=\"toc-text\">NFS介绍</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85\"><span class=\"toc-text\">安装</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3\"><span class=\"toc-text\">问题解决</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#mount-nfs-No-route-to-host\"><span class=\"toc-text\">mount.nfs: No route to host</span></a></li></ol>","author":{"name":"FaceMan","slug":"blog-author","avatar":"https://github.com/faceman0814/picx-images-hosting/raw/master/20241114/image.2vermeukr5.webp","link":"/","description":"从0开始，直到1。","socials":{"github":"https://github.com/faceman0814","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/manmanzainuli","juejin":"","customs":{"bokeyuan":{"icon":"/svg/bokeyuan.svg","link":"https://www.cnblogs.com/FaceMan"}}}},"mapped":true,"hidden":false,"prev_post":{"title":"Sql优化方法","uid":"1796052fe66afe402255c3eb4319b228","slug":"Sql优化方法","date":"2024-11-21T00:00:00.000Z","updated":"2024-12-24T01:56:35.264Z","comments":true,"path":"api/articles/Sql优化方法.json","keywords":null,"cover":"https://github.com/faceman0814/picx-images-hosting/raw/master/20241120/image.esjgf1zs0.webp","text":"最近新入职了一家电商公司，做CRM系统，由于业务量比较大，数据量庞大动不动几十万数据起步，数据库的压力也很大。比如最近遇到的需求，需要查看最规定时间内客户是否有...","permalink":"/post/Sql优化方法","photos":[],"count_time":{"symbolsCount":"3.4k","symbolsTime":"3 mins."},"categories":[{"name":"数据库","slug":"数据库","count":1,"path":"api/categories/数据库.json"}],"tags":[{"name":"Sql","slug":"Sql","count":1,"path":"api/tags/Sql.json"}],"author":{"name":"FaceMan","slug":"blog-author","avatar":"https://github.com/faceman0814/picx-images-hosting/raw/master/20241114/image.2vermeukr5.webp","link":"/","description":"从0开始，直到1。","socials":{"github":"https://github.com/faceman0814","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/manmanzainuli","juejin":"","customs":{"bokeyuan":{"icon":"/svg/bokeyuan.svg","link":"https://www.cnblogs.com/FaceMan"}}}},"feature":false},"next_post":{"title":"c#实现对话记录转PDF、Word、MD文件","uid":"d153e7aca8864e461d50ee65cfb7c4b4","slug":"c#实现对话记录转PDF、Word、MD文件","date":"2024-11-19T00:00:00.000Z","updated":"2024-12-24T01:56:35.265Z","comments":true,"path":"api/articles/c#实现对话记录转PDF、Word、MD文件.json","keywords":null,"cover":"https://github.com/faceman0814/picx-images-hosting/raw/master/20241114/esmeralda.2krxt9cbnx.webp","text":"工作中有个场景是chatgpt聊天对话记录下载支持PDF、Word、MD格式，于是有了本篇文章。 实现思路对话中可能会用md格式的回答，且因为不能直接转成pdf...","permalink":"/post/c#实现对话记录转PDF、Word、MD文件","photos":[],"count_time":{"symbolsCount":"8.7k","symbolsTime":"8 mins."},"categories":[{"name":".Net","slug":"Net","count":4,"path":"api/categories/Net.json"}],"tags":[{"name":"c#","slug":"c","count":2,"path":"api/tags/c.json"},{"name":".Net","slug":"Net","count":2,"path":"api/tags/Net.json"}],"author":{"name":"FaceMan","slug":"blog-author","avatar":"https://github.com/faceman0814/picx-images-hosting/raw/master/20241114/image.2vermeukr5.webp","link":"/","description":"从0开始，直到1。","socials":{"github":"https://github.com/faceman0814","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/manmanzainuli","juejin":"","customs":{"bokeyuan":{"icon":"/svg/bokeyuan.svg","link":"https://www.cnblogs.com/FaceMan"}}}}}}
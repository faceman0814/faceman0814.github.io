<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Ubuntu on FaceMan&#39;s Blog</title>
    <link>http://localhost:1313/tags/ubuntu/</link>
    <description>Recent content in Ubuntu on FaceMan&#39;s Blog</description>
    <generator>Hugo</generator>
    <language>zh-CN</language>
    <lastBuildDate>Sat, 09 Nov 2024 15:54:48 +0800</lastBuildDate>
    <atom:link href="http://localhost:1313/tags/ubuntu/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Ubuntu一键安装卸载docker和dockercompose</title>
      <link>http://localhost:1313/post/ubuntu%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85%E5%8D%B8%E8%BD%BDdocker%E5%92%8Cdockercompose/</link>
      <pubDate>Sat, 09 Nov 2024 15:54:48 +0800</pubDate>
      <guid>http://localhost:1313/post/ubuntu%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85%E5%8D%B8%E8%BD%BDdocker%E5%92%8Cdockercompose/</guid>
      <description>&lt;h2 id=&#34;前言&#34;&gt;前言&lt;/h2&gt;&#xA;&lt;p&gt;在新建的服务器上，我们一般会用几条命令来下载安装docker和docker-compose，这里为了避免每次都去搜索安装命令，所以写成脚本，本文仅支持Ubuntu\CentOS。&lt;/p&gt;&#xA;&lt;h2 id=&#34;一docker是什么&#34;&gt;一、docker是什么？&lt;/h2&gt;&#xA;&lt;p&gt;Docker是一个开源的容器化平台，用于构建、部署和管理应用程序。它采用了轻量级的容器技术，可以在不同的操作系统上运行，并提供了一种将应用程序及其依赖项打包到可移植的容器中的方式。&lt;/p&gt;&#xA;&lt;p&gt;以下是Docker的一些重要特点和概念：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;容器化：Docker利用Linux内核的容器功能来隔离应用程序及其依赖项。每个容器都是一个独立的运行环境，具有自己的文件系统、进程空间和资源限制。容器可以快速启动、停止和迁移，而且相互之间彼此隔离，避免了应用程序之间的冲突和依赖问题。&lt;/li&gt;&#xA;&lt;li&gt;镜像：Docker使用镜像来构建容器。镜像是一个只读的模板，包含了应用程序运行所需的所有文件系统、库和依赖项。通过使用Dockerfile定义构建步骤，可以创建自定义的镜像。镜像可以从Docker Hub等镜像仓库中获取，也可以通过构建自己的镜像进行定制。&lt;/li&gt;&#xA;&lt;li&gt;容器注册表：Docker Hub是Docker官方的公共镜像注册表，提供了大量的基础镜像供用户使用。除此之外，还有其他的公共和私有镜像注册表，用户可以在其中存储和分享自己的镜像。&lt;/li&gt;&#xA;&lt;li&gt;Docker引擎：Docker引擎是运行和管理容器的核心组件。它包括一个守护进程（Docker daemon）和一个命令行客户端（Docker CLI）。守护进程负责构建、运行和管理容器，而命令行客户端提供了交互式的接口来与守护进程进行通信。&lt;/li&gt;&#xA;&lt;li&gt;编排和管理工具：Docker提供了一系列的编排和管理工具，用于简化多个容器的部署和管理。例如，Docker Compose允许通过一个YAML文件描述多个容器的关系和配置，并通过一条命令启动、停止和扩展整个应用程序的容器集群。&lt;/li&gt;&#xA;&lt;li&gt;跨平台支持：Docker可以在不同的操作系统上运行，包括Linux、Windows和MacOS等。对于Linux平台，Docker直接使用操作系统的容器功能；而对于Windows和MacOS，Docker使用一个轻量级的虚拟机（称为Docker Desktop）来提供容器化环境。&lt;/li&gt;&#xA;&lt;li&gt;生态系统：Docker拥有庞大的开发者社区和丰富的生态系统。社区提供了大量的文档、教程和示例代码，以及交流和支持的平台。此外，还有许多第三方工具和服务，如监控工具、CI/CD集成等，与Docker集成，进一步扩展了其功能和用途。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;总结起来，Docker是一个强大的容器化平台，通过将应用程序及其依赖项打包到独立的容器中，提供了更加灵活、可移植和可扩展的应用部署和管理方式。它已经成为现代软件开发和运维的重要工具之一。&lt;/p&gt;&#xA;&lt;h2 id=&#34;二docker-compose是什么&#34;&gt;二、docker compose是什么？&lt;/h2&gt;&#xA;&lt;p&gt;Docker Compose是一个用于定义和管理多个Docker容器的工具。它允许您使用简单的YAML文件描述应用程序中的服务、网络、存储卷等配置，并通过一个命令行界面来启动、停止和管理这些容器。&lt;/p&gt;&#xA;&lt;p&gt;以下是Docker Compose的一些重要特点：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;声明式语法：Docker Compose使用声明式的YAML文件来描述应用程序的架构和配置。您可以在文件中定义每个服务的镜像、端口映射、环境变量、依赖关系等。这种声明式语法使得定义和管理复杂的容器集群变得简单且可维护。&lt;/li&gt;&#xA;&lt;li&gt;多容器应用管理：Docker Compose专注于管理多个相关的容器，以构建完整的应用程序堆栈。通过一次性的命令，您可以启动、停止、重启和销毁整个容器集群，而不需要手动处理每个容器。&lt;/li&gt;&#xA;&lt;li&gt;容器间连接和通信：使用Docker Compose，您可以轻松地为容器之间创建连接和网络。您可以定义容器之间的连接方式，使它们能够相互通信和访问。这在构建微服务架构或多层应用程序时非常有用。&lt;/li&gt;&#xA;&lt;li&gt;可伸缩性和负载均衡：Docker Compose允许您设置容器的伸缩策略，以根据应用程序的需要自动扩展或收缩容器。它还支持与负载均衡器集成，可以将流量分发到多个实例上，提高应用程序的性能和可靠性。&lt;/li&gt;&#xA;&lt;li&gt;环境隔离和测试：使用Docker Compose，您可以轻松地在开发和测试环境中复制生产环境的配置。您可以创建一个本地的容器化开发环境，确保应用程序在不同环境下的一致性，并减少由于环境差异引起的问题。&lt;/li&gt;&#xA;&lt;li&gt;可插拔的架构：Docker Compose是可插拔的，可以与其他工具和服务集成，以满足特定需求。例如，您可以与监控和日志记录工具集成，以监视和管理容器的性能和状态。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;Compose V1语法： Compose V1语法是较早版本的Compose语法，其文件名通常为docker-compose.yml。以下是一些Compose V1语法的特点：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;services：使用services关键字定义要运行的服务。每个服务都有一个名称和一组配置选项。&lt;/li&gt;&#xA;&lt;li&gt;image：指定要使用的镜像名称。&lt;/li&gt;&#xA;&lt;li&gt;ports：定义要映射到主机上的容器端口。&lt;/li&gt;&#xA;&lt;li&gt;volumes：指定要挂载到容器中的卷。&lt;/li&gt;&#xA;&lt;li&gt;links：定义与其他服务之间的连接。&lt;/li&gt;&#xA;&lt;li&gt;environment：设置容器中的环境变量。&lt;/li&gt;&#xA;&lt;li&gt;depends_on：定义服务之间的依赖关系。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;以下是一个Compose V1语法的示例：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;version: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;2&amp;#39;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;services:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  web:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    image: nginx:latest&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ports:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      - 8080:80&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    volumes:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      - ./html:/usr/share/nginx/html&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  db:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    image: mysql:latest&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    environment:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      - MYSQL_ROOT_PASSWORD&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;secret&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Compose V2语法： Compose V2语法是较新版本的Compose语法，其文件名通常为docker-compose.yaml或docker-compose.yml。以下是一些Compose V2语法的特点：&lt;/p&gt;</description>
    </item>
    <item>
      <title>Ubuntu安装Clash</title>
      <link>http://localhost:1313/post/ubuntu%E5%AE%89%E8%A3%85clash/</link>
      <pubDate>Sat, 09 Nov 2024 15:47:31 +0800</pubDate>
      <guid>http://localhost:1313/post/ubuntu%E5%AE%89%E8%A3%85clash/</guid>
      <description>&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;下载配置文件或者导入订阅连接配置。&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;下载连接（由于clash作者删库跑路了，所以我这里提供一个安装包）&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;链接：https://pan.baidu.com/s/1Rz5Sb-1hhCSy_XjgzpKWvA&#xA;提取码：vaaz&#xA;2. 解压,已解压可跳过&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-powershell&#34; data-lang=&#34;powershell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;gzip -d clash.gz&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;3&#34;&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;赋值权限&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-powershell&#34; data-lang=&#34;powershell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo chmod &lt;span style=&#34;color:#ae81ff&#34;&gt;+777&lt;/span&gt; clash&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;第一次执行创建必要文件：./clash&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;安装过程可能会出现网络问题下载不了，可以直接复制下载链接到外部现在再传进去是一样的。&#xA;&lt;img src=&#34;https://faceman-blog.oss-cn-chengdu.aliyuncs.com/oneblog/20240115000642959.png&#34;&gt;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;去代理软件复制节点订阅地址&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;这里可以复制所有节点地址也可以自己配置节点然后生成地址&#xA;&lt;img src=&#34;https://faceman-blog.oss-cn-chengdu.aliyuncs.com/oneblog/20240115000642895.png&#34;&gt;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;配置文件获取。&lt;/p&gt;&#xA;&lt;h3 id=&#34;方法一&#34;&gt;方法一&lt;/h3&gt;&#xA;&lt;p&gt;命令行获取&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-powershell&#34; data-lang=&#34;powershell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;wget -U &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Mozilla/6.0&amp;#34;&lt;/span&gt; -O ~/.config/clash/config.yaml 你的Clash订阅链接网址&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;## 主订阅链接：https://wmdy.355365.xyz/link/w1FRr398wFCOa0XK?clash=2&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;## 备用订阅链接：https://dy.wmyun.men/link/w1FRr398wFCOa0XK?clash=2&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;方法二&#34;&gt;方法二&lt;/h3&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;用windows的clash软件获取配置文件&#xA;&lt;img src=&#34;https://faceman-blog.oss-cn-chengdu.aliyuncs.com/oneblog/20240115000642825.png&#34;&gt;&lt;/li&gt;&#xA;&lt;li&gt;将获取的config文件替换到/root/.config/clash/config.yaml&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;最后的文件结构应该是这样&#xA;&lt;img src=&#34;https://faceman-blog.oss-cn-chengdu.aliyuncs.com/oneblog/20240115000642749.png&#34;&gt;&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;代理改成手动并配置端口，如果是云服务器，需要打开对应的端口。&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-powershell&#34; data-lang=&#34;powershell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 编辑环境变量&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo nano /etc/environment&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 配置手动代理&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;http_proxy=&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;http://127.0.0.1:7890&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;https_proxy=&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://127.0.0.1:7890&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;socks_proxy=&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;socks5h://127.0.0.1:7891&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;no_proxy=&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;localhost,127.0.0.1,::1&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# CTRL+X 保存&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 应用环境变量 &lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;source /etc/environment&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 查看代理服务配置&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;env | grep -i proxy&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 重启&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo reboot&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;配置服务&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;vim /etc/systemd/system/clash.service&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
